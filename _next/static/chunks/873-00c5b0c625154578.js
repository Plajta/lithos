"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{531:(e,t,o)=>{o.d(t,{AM:()=>i,Wv:()=>l,dT:()=>d,hl:()=>s});var n=o(5474);o(1530);var a=o(6214),r=o(4859);function i(e){let{...t}=e;return(0,n.jsx)(a.bL,{"data-slot":"popover",...t})}function l(e){let{...t}=e;return(0,n.jsx)(a.l9,{"data-slot":"popover-trigger",...t})}function s(e){let{className:t,align:o="center",sideOffset:i=4,...l}=e;return(0,n.jsx)(a.ZL,{children:(0,n.jsx)(a.UC,{"data-slot":"popover-content",align:o,sideOffset:i,className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-hidden",t),...l})})}function d(e){let{...t}=e;return(0,n.jsx)(a.Mz,{"data-slot":"popover-anchor",...t})}},857:(e,t,o)=>{o.d(t,{w:()=>i});var n=o(5474);o(1530);var a=o(7544),r=o(4859);function i(e){let{className:t,orientation:o="horizontal",decorative:i=!0,...l}=e;return(0,n.jsx)(a.b,{"data-slot":"separator-root",decorative:i,orientation:o,className:(0,r.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...l})}},4333:(e,t,o)=>{o.d(t,{CM:()=>b,Jy:()=>m,MA:()=>p,Rd:()=>h});var n=o(3196),a=o.n(n),r=o(7541),i=o(4222),l=o(471),s=o.n(l),d=o(6430),u=o.n(d);function c(e){return 2.83465*e}function f(e){return c(e)+c(5)}async function g(e){let{configuration:t}=e,o=new(s()),n=o.pipe(u()()),a=function(e,t,o){let n=Array.from({length:4},()=>Array.from({length:4},()=>null)),a=0;for(let t=0;t<4;t++)for(let o=0;o<4;o++){if(!(a<e.length))return n;n[t][o]=e[a],a++}return n}(t.buttons,4,4),r=await fetch("/fonts/Roboto-Regular.ttf");for(let[e,t]of(o.registerFont("Roboto-Regular",await r.arrayBuffer()),a.entries()))for(let[n,a]of t.entries()){if(o.roundedRect(f(10)+c(46)*n,f(10)+c(46)*e,c(43),c(43),10).stroke(),!a||!a.label||!a.imageUrl)continue;o.font("Roboto-Regular").text(a.label,f(10)+c(46)*n,f(48)+c(45)*e+3*e,{width:c(40),align:"center",baseline:"bottom"});let t=await fetch(a.imageUrl).then(e=>e.arrayBuffer());o.image(t,f(12)+c(46)*n,f(12)+c(45)*e+3*e,{width:110,height:80,align:"center",valign:"bottom"})}o.rect(f(6),f(6),c(189),c(205)).stroke(),o.rect(f(6),f(201),c(189),c(10)).stroke(),o.fontSize(20),o.font("Roboto-Regular").text(t.name,f(6),f(202),{width:c(99),height:c(10),align:"center"}),o.rect(f(105),f(201),c(90),c(10)).fill("#".concat(b[t.colorCode])),o.end(),n.on("finish",function(){let e=n.toBlobURL("application/pdf"),o=document.createElement("a");o.href=e,o.download="".concat(t.name,"_lithos.pdf"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(e)})}let b={RED:"ff0000",GREEN:"00ff00",BLUE:"0000ff",CYAN:"00ffff",MAGENTA:"ff00ff",YELLOW:"ffff00",PURPLE:"800080",ORANGE:"ffa500",BLACK:"000000"},m=["RED","GREEN","BLUE","CYAN","MAGENTA","YELLOW","PURPLE","ORANGE","BLACK"],p=["sisyphus"],h=(0,i.v)()((e,t)=>({configuration:null,createConfiguration:t=>{let{name:o,type:n,colorCode:a}=t;e(()=>({configuration:{name:o,colorCode:a,buttons:Array.from({length:"sisyphus"===n?16:9}).map((e,t)=>({id:t+1,label:null,imageUrl:null,audioUrl:null})),size:0}}))},updateConfiguration:t=>{let{name:o,colorCode:n}=t;e(e=>e.configuration?{...e,configuration:{...e.configuration,name:o,colorCode:n}}:e)},loadConfiguration:async t=>{let o=new(a()),n=await t.arrayBuffer(),i=await o.loadAsync(n),l=i.file("manifest.json");if(!l){r.oR.error("Nelze nač\xedst nahranou konfiguraci!");return}let s=JSON.parse(await l.async("string")),d=0,u=[...s.buttons.map((e,t)=>({...e,id:t+1,imageUrl:null,audioUrl:null}))],c=await Promise.all(u.map(async e=>{let t=i.file("images/".concat(e.id,".png")),o=i.file("audio/".concat(e.id,".wav"));if(!t||!o)return e;let n=await t.async("blob"),a=await o.async("blob");return d+=n.size,d+=a.size,{...e,imageUrl:URL.createObjectURL(n),audioUrl:URL.createObjectURL(a)}}));e(e=>({configuration:{name:s.name,colorCode:s.colorCode,buttons:c,size:d}}))},saveConfiguration:async()=>{let e=new(a()),{configuration:o}=t();if(!o)return;let n={version:1,name:o.name,colorCode:o.colorCode,buttons:o.buttons.map(e=>{let{label:t}=e;return{label:t}})};for(let[t,a]of(e.file("manifest.json",JSON.stringify(n,null,4)),Object.entries(o.buttons))){if(!a.audioUrl||!a.imageUrl||!a.label)continue;let t=await fetch(a.audioUrl).then(e=>e.blob()),o=await fetch(a.imageUrl).then(e=>e.blob());e.file("audio/".concat(Number(a.id),".wav"),t),e.file("images/".concat(Number(a.id),".png"),o)}let r=await e.generateAsync({type:"blob"}),i=URL.createObjectURL(r),l=document.createElement("a");l.href=i,l.download="".concat(o.name,"_lithos.zip"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i)},getColorLookupTable:()=>{let e="";for(let[t,o]of Object.entries(b))e+="".concat(o," ").concat(t.toLocaleLowerCase(),"\n");return e},uploadButtonImage:(o,n)=>{let{configuration:a}=t();if(!a)return;if(!n){e(e=>({configuration:{...a,name:e.configuration.name,colorCode:e.configuration.colorCode,buttons:e.configuration.buttons.map((e,t)=>t===o-1?{...e,imageUrl:null}:e)}}));return}let r=new Image;r.onload=()=>{let t=document.createElement("canvas");t.width=r.naturalWidth,t.height=r.naturalHeight;let a=t.getContext("2d");if(!a)throw Error("ss");a.drawImage(r,0,0),e(e=>({configuration:{name:e.configuration.name,colorCode:e.configuration.colorCode,size:e.configuration.size+n.size,buttons:e.configuration.buttons.map((e,n)=>n===o-1?{...e,imageUrl:t.toDataURL("image/png")}:e)}}))},r.src=URL.createObjectURL(n)},uploadButtonAudio:async(o,n)=>{let{configuration:a}=t();if(a){if(!n){e(()=>({configuration:{...a,name:a.name,colorCode:a.colorCode,buttons:a.buttons.map((e,t)=>t===o-1?{...e,audioUrl:null}:e)}}));return}try{let t=await n.arrayBuffer(),r=new AudioContext,i=await r.decodeAudioData(t),l=new OfflineAudioContext(1,44100*i.duration,44100),s=l.createBufferSource();s.buffer=i,s.connect(l.destination),s.start(0);let d=await l.startRendering(),u=d.getChannelData(0),c=d.length,f=new ArrayBuffer(44+2*c),g=new DataView(f),b=(e,t)=>{for(let o=0;o<t.length;o++)g.setUint8(e+o,t.charCodeAt(o))};b(0,"RIFF"),g.setUint32(4,36+2*c,!0),b(8,"WAVE"),b(12,"fmt "),g.setUint32(16,16,!0),g.setUint16(20,1,!0),g.setUint16(22,1,!0),g.setUint32(24,44100,!0),g.setUint32(28,88200,!0),g.setUint16(32,2,!0),g.setUint16(34,16,!0),b(36,"data"),g.setUint32(40,2*c,!0);for(let e=0;e<c;e++){let t=Math.max(-1,Math.min(1,u[e]));g.setInt16(44+2*e,32767*t,!0)}e(e=>({configuration:{name:a.name,colorCode:a.colorCode,size:a.size+n.size,buttons:a.buttons.map((e,t)=>t===o-1?{...e,audioUrl:URL.createObjectURL(new Blob([g],{type:"audio/wav"}))}:e)}}))}catch(e){r.oR.error("Převod zvuku selhal s chybou: ".concat(e));return}}},updateButtonLabel:(t,o)=>{e(e=>{let n=e.configuration;return{configuration:{name:n.name,colorCode:n.colorCode,size:n.size,buttons:n.buttons.map((e,n)=>n===t-1?{...e,label:o}:e)}}})},generateConfigurationPdf:async()=>{let{configuration:e}=t();e&&await g({configuration:e})}}))},4656:(e,t,o)=>{o.d(t,{p:()=>r});var n=o(5474),a=o(4859);let r=o(1530).forwardRef((e,t)=>{let{className:o,variant:r="default",type:i,...l}=e;return(0,n.jsx)("input",{type:i,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","ghost"===r&&"border-none bg-transparent shadow-none focus-visible:ring-0 focus-visible:ring-offset-0",o),ref:t,...l})});r.displayName="Input"},4859:(e,t,o)=>{o.d(t,{cn:()=>r});var n=o(5398),a=o(6790);function r(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,a.QP)((0,n.$)(t))}},7932:(e,t,o)=>{o.d(t,{$:()=>s});var n=o(5474);o(1530);var a=o(9671),r=o(280),i=o(4859);let l=(0,r.F)("cursor-pointer inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function s(e){let{className:t,variant:o,size:r,asChild:s=!1,...d}=e,u=s?a.DX:"button";return(0,n.jsx)(u,{"data-slot":"button",className:(0,i.cn)(l({variant:o,size:r,className:t})),...d})}}}]);